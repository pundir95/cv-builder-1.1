{"version":3,"sources":["../../../../../libs/dto/src/auth/login.ts"],"sourcesContent":["import { createZodDto } from \"nestjs-zod/dto\";\r\nimport { z } from \"zod\";\r\n\r\nimport { usernameSchema } from \"../user\";\r\n\r\nexport const loginSchema = z\r\n  .object({\r\n    email: z.string().transform((value) => value.toLowerCase()),\r\n    password: z.string(),\r\n  })\r\n  .refine(\r\n    (value) => {\r\n      return value.email.includes(\"@\")\r\n        ? z.string().email().parse(value.email)\r\n        : usernameSchema.parse(value.email);\r\n    },\r\n    { message: \"InvalidCredentials\" },\r\n  );\r\n\r\nexport class LoginDto extends createZodDto(loginSchema) {}\r\n"],"names":["LoginDto","loginSchema","z","object","email","string","transform","value","toLowerCase","password","refine","includes","parse","usernameSchema","message","createZodDto"],"mappings":";;;;;;;;;;;IAmBaA,QAAQ;eAARA;;IAdAC,WAAW;eAAXA;;;qBALgB;qBACX;sBAEa;AAExB,MAAMA,cAAcC,MAAC,CACzBC,MAAM,CAAC;IACNC,OAAOF,MAAC,CAACG,MAAM,GAAGC,SAAS,CAAC,CAACC,QAAUA,MAAMC,WAAW;IACxDC,UAAUP,MAAC,CAACG,MAAM;AACpB,GACCK,MAAM,CACL,CAACH;IACC,OAAOA,MAAMH,KAAK,CAACO,QAAQ,CAAC,OACxBT,MAAC,CAACG,MAAM,GAAGD,KAAK,GAAGQ,KAAK,CAACL,MAAMH,KAAK,IACpCS,oBAAc,CAACD,KAAK,CAACL,MAAMH,KAAK;AACtC,GACA;IAAEU,SAAS;AAAqB;AAG7B,IAAA,AAAMd,WAAN,MAAMA,iBAAiBe,IAAAA,iBAAY,EAACd;AAAc"}