{"version":3,"sources":["../../../../../libs/parser/src/reactive-resume/index.ts"],"sourcesContent":["import type { ResumeData } from \"@reactive-resume/schema\";\r\nimport { resumeDataSchema } from \"@reactive-resume/schema\";\r\nimport type { Json } from \"@reactive-resume/utils\";\r\nimport type { Schema } from \"zod\";\r\n\r\nimport type { Parser } from \"../interfaces/parser\";\r\n\r\nexport class ReactiveResumeParser implements Parser<Json, ResumeData> {\r\n  schema: Schema;\r\n\r\n  constructor() {\r\n    this.schema = resumeDataSchema;\r\n  }\r\n\r\n  readFile(file: File): Promise<Json> {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n\r\n      // eslint-disable-next-line unicorn/prefer-add-event-listener\r\n      reader.onload = () => {\r\n        try {\r\n          const result = JSON.parse(reader.result as string) as Json;\r\n          resolve(result);\r\n        } catch {\r\n          reject(new Error(\"Failed to parse JSON\"));\r\n        }\r\n      };\r\n\r\n      // eslint-disable-next-line unicorn/prefer-add-event-listener\r\n      reader.onerror = () => {\r\n        reject(new Error(\"Failed to read the file\"));\r\n      };\r\n\r\n      // eslint-disable-next-line unicorn/prefer-blob-reading-methods\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  validate(data: Json) {\r\n    return this.schema.parse(data) as ResumeData;\r\n  }\r\n\r\n  convert(data: ResumeData) {\r\n    return data;\r\n  }\r\n}\r\n"],"names":["ReactiveResumeParser","readFile","file","Promise","resolve","reject","reader","FileReader","onload","result","JSON","parse","Error","onerror","readAsText","validate","data","schema","convert","resumeDataSchema"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBANoB;AAM1B,IAAA,AAAMA,uBAAN,MAAMA;IAOXC,SAASC,IAAU,EAAiB;QAClC,OAAO,IAAIC,QAAQ,CAACC,SAASC;YAC3B,MAAMC,SAAS,IAAIC;YAEnB,6DAA6D;YAC7DD,OAAOE,MAAM,GAAG;gBACd,IAAI;oBACF,MAAMC,SAASC,KAAKC,KAAK,CAACL,OAAOG,MAAM;oBACvCL,QAAQK;gBACV,EAAE,UAAM;oBACNJ,OAAO,IAAIO,MAAM;gBACnB;YACF;YAEA,6DAA6D;YAC7DN,OAAOO,OAAO,GAAG;gBACfR,OAAO,IAAIO,MAAM;YACnB;YAEA,+DAA+D;YAC/DN,OAAOQ,UAAU,CAACZ;QACpB;IACF;IAEAa,SAASC,IAAU,EAAE;QACnB,OAAO,IAAI,CAACC,MAAM,CAACN,KAAK,CAACK;IAC3B;IAEAE,QAAQF,IAAgB,EAAE;QACxB,OAAOA;IACT;IAlCA,aAAc;QACZ,IAAI,CAACC,MAAM,GAAGE,wBAAgB;IAChC;AAiCF"}