{"version":3,"sources":["../../../../../libs/utils/src/namespaces/date.ts"],"sourcesContent":["import dayjs from \"dayjs\";\r\nimport { z } from \"zod\";\r\n\r\nexport const dateSchema = z.union([z.date(), z.string().datetime()]).transform((value) => {\r\n  if (typeof value === \"string\") return dayjs(value).toDate();\r\n  return value;\r\n});\r\n\r\nexport const sortByDate = <T>(a: T, b: T, key: keyof T, desc = true) => {\r\n  if (!a[key] || !b[key]) return 0;\r\n  if (!(a[key] instanceof Date) || !(b[key] instanceof Date)) return 0;\r\n\r\n  if (dayjs(a[key] as Date).isSame(dayjs(b[key] as Date))) return 0;\r\n  if (desc) return dayjs(a[key] as Date).isBefore(dayjs(b[key] as Date)) ? 1 : -1;\r\n  else return dayjs(a[key] as Date).isBefore(dayjs(b[key] as Date)) ? -1 : 1;\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport const deepSearchAndParseDates = (obj: any, dateKeys: string[]): any => {\r\n  if (typeof obj !== \"object\" || obj === null) {\r\n    return obj;\r\n  }\r\n\r\n  const keys = Object.keys(obj);\r\n\r\n  if (keys.length === 0) {\r\n    return obj;\r\n  }\r\n\r\n  for (const key of keys) {\r\n    let value = obj[key];\r\n\r\n    if (dateKeys.includes(key) && typeof value === \"string\") {\r\n      const parsedDate = new Date(value);\r\n      if (!Number.isNaN(parsedDate.getTime())) {\r\n        value = parsedDate;\r\n      }\r\n    }\r\n\r\n    obj[key] = deepSearchAndParseDates(value, dateKeys);\r\n  }\r\n\r\n  return obj;\r\n};\r\n"],"names":["dateSchema","deepSearchAndParseDates","sortByDate","z","union","date","string","datetime","transform","value","dayjs","toDate","a","b","key","desc","Date","isSame","isBefore","obj","dateKeys","keys","Object","length","includes","parsedDate","Number","isNaN","getTime"],"mappings":";;;;;;;;;;;IAGaA,UAAU;eAAVA;;IAeAC,uBAAuB;eAAvBA;;IAVAC,UAAU;eAAVA;;;;gEARK;qBACA;AAEX,MAAMF,aAAaG,MAAC,CAACC,KAAK,CAAC;IAACD,MAAC,CAACE,IAAI;IAAIF,MAAC,CAACG,MAAM,GAAGC,QAAQ;CAAG,EAAEC,SAAS,CAAC,CAACC;IAC9E,IAAI,OAAOA,UAAU,UAAU,OAAOC,IAAAA,cAAK,EAACD,OAAOE,MAAM;IACzD,OAAOF;AACT;AAEO,MAAMP,aAAa,CAAIU,GAAMC,GAAMC,KAAcC,OAAO,IAAI;IACjE,IAAI,CAACH,CAAC,CAACE,IAAI,IAAI,CAACD,CAAC,CAACC,IAAI,EAAE,OAAO;IAC/B,IAAI,CAAEF,CAAAA,CAAC,CAACE,IAAI,YAAYE,IAAG,KAAM,CAAEH,CAAAA,CAAC,CAACC,IAAI,YAAYE,IAAG,GAAI,OAAO;IAEnE,IAAIN,IAAAA,cAAK,EAACE,CAAC,CAACE,IAAI,EAAUG,MAAM,CAACP,IAAAA,cAAK,EAACG,CAAC,CAACC,IAAI,IAAY,OAAO;IAChE,IAAIC,MAAM,OAAOL,IAAAA,cAAK,EAACE,CAAC,CAACE,IAAI,EAAUI,QAAQ,CAACR,IAAAA,cAAK,EAACG,CAAC,CAACC,IAAI,KAAa,IAAI,CAAC;SACzE,OAAOJ,IAAAA,cAAK,EAACE,CAAC,CAACE,IAAI,EAAUI,QAAQ,CAACR,IAAAA,cAAK,EAACG,CAAC,CAACC,IAAI,KAAa,CAAC,IAAI;AAC3E;AAGO,MAAMb,0BAA0B,CAACkB,KAAUC;IAChD,IAAI,OAAOD,QAAQ,YAAYA,QAAQ,MAAM;QAC3C,OAAOA;IACT;IAEA,MAAME,OAAOC,OAAOD,IAAI,CAACF;IAEzB,IAAIE,KAAKE,MAAM,KAAK,GAAG;QACrB,OAAOJ;IACT;IAEA,KAAK,MAAML,OAAOO,KAAM;QACtB,IAAIZ,QAAQU,GAAG,CAACL,IAAI;QAEpB,IAAIM,SAASI,QAAQ,CAACV,QAAQ,OAAOL,UAAU,UAAU;YACvD,MAAMgB,aAAa,IAAIT,KAAKP;YAC5B,IAAI,CAACiB,OAAOC,KAAK,CAACF,WAAWG,OAAO,KAAK;gBACvCnB,QAAQgB;YACV;QACF;QAEAN,GAAG,CAACL,IAAI,GAAGb,wBAAwBQ,OAAOW;IAC5C;IAEA,OAAOD;AACT"}